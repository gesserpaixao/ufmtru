/* Shield UI 1.7.37 Trial Version | Copyright 2013-2018 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(a,b,c,d){var e,f,g,h,i,j,k,l=b.ui.Widget,m=b.Class,n=b.DataSource,o=(document,Math.abs,Math.min),p=Math.max,q=Math.pow,r=(Math.floor,a.proxy),s=(a.each,a.map,b.format),t=b.to["int"],u=b.error,v=b.is,w=v.defined,x=(v.string,v.object,v.func,b.to.number,"squarified"),y="horizontal",z="vertical",A="click",B="disabled";g=m.extend({init:function(a,b,c,d){var e=this;e.left=a,e.top=b,e.width=c,e.height=d},getSize:function(){return o(this.width,this.height)},getRowContainers:function(a){var b,c=this,d=c.left,e=c.top,f=c.sum(a),g=f/c.height,h=f/c.width,i=[];if(c.width>=c.height)for(b=0;b<a.length;b++)i.push({left:d,top:e,right:d+g,bottom:e+a[b].targetValue/g,dataItem:a[b]}),e+=a[b].targetValue/g;else for(b=0;b<a.length;b++)i.push({left:d,top:e,right:d+a[b].targetValue/h,bottom:e+h,dataItem:a[b]}),d+=a[b].targetValue/h;return i},remainingArea:function(a){var b,c,d,e,f,h=this;return h.width>=h.height?(b=a/h.height,d=h.width-b,f=new g(h.left+b,h.top,d,h.height)):(c=a/h.width,e=h.height-c,f=new g(h.left,h.top+c,h.width,e)),f},sum:function(a){var b,c=0;for(b=0;b<a.length;b++)c+=a[b].targetValue;return c}}),h=m.extend({init:function(){},sort:function(a){a.sort(function(a,b){return b.targetValue-a.targetValue})},sum:function(a){var b,c=0;for(b=0;b<a.length;b++)c+=a[b].targetValue;return c},min:function(a){var b,c=d;for(b=0;b<a.length;b++)(!w(c)||c>a[b].targetValue)&&(c=a[b].targetValue);return c},max:function(a){var b,c=d;for(b=0;b<a.length;b++)(!w(c)||c<a[b].targetValue)&&(c=a[b].targetValue);return c}}),h.create=function(a){return a===x?new k:a===y?new i:new j},i=h.extend({init:function(){h.fn.init.apply(this,arguments)},execute:function(a,b,c,d,e){var f,h,i,j,k,l,m=this,n=m.sum(a),o=b.left,p=b.top,q=!e||e===y;for(m.sort(a),l=0;l<a.length;l++)i=a[l],f=q?b.width*i.targetValue/n:b.width,h=q?b.height:b.height*i.targetValue/n,i.items&&0!==i.items.length?(j=d.createGroup(c,new g(o,p,f,h)),k=d.createTitle(j,d.getItemText(i)),k=new g(k.left-j.position().left,k.top-j.position().top,k.width,k.height),m.execute(i.items,k,j,d,q?z:y)):d.createItem(c,{left:o,top:p,width:f,height:h,dataItem:i}),q?o+=f:p+=h}}),j=h.extend({init:function(){h.fn.init.apply(this,arguments)},execute:function(a,b,c,d,e){var f,h,i,j,k,l,m=this,n=m.sum(a),o=b.left,p=b.top,q=!e||e===z;for(m.sort(a),l=0;l<a.length;l++)i=a[l],h=q?b.height*i.targetValue/n:b.height,f=q?b.width:b.width*i.targetValue/n,i.items&&0!==i.items.length?(j=d.createGroup(c,new g(o,p,f,h)),k=d.createTitle(j,d.getItemText(i)),k=new g(k.left-j.position().left,k.top-j.position().top,k.width,k.height),m.execute(i.items,k,j,d,q?y:z)):d.createItem(c,{left:o,top:p,width:f,height:h,dataItem:i}),q?p+=h:o+=f}}),k=h.extend({init:function(){h.fn.init.apply(this,arguments)},execute:function(a,b,c,d){var e,f,h,i,j,k,l=this;for(l.sort(a),e=l._squarifyCore(l._normalize(a,b.width*b.height,d),[],b,[]),f=l._getTreemap(e),k=0;k<f.length;k++)h=f[k],h.dataItem.items&&0!==h.dataItem.items.length?(i=d.createGroup(c,new g(h.left,h.top,h.right-h.left,h.bottom-h.top)),j=d.createTitle(i,d.getItemText(h.dataItem)),j=new g(j.left-i.position().left,j.top-i.position().top,j.width,j.height),l.execute(h.dataItem.items,j,i,d)):d.createItem(c,{left:h.left,top:h.top,width:h.right-h.left,height:h.bottom-h.top,dataItem:h.dataItem})},_squarifyCore:function(a,b,c,d){var e,f,g,h=this;return 0===a.length?void d.push(c.getRowContainers(b)):(e=c.getSize(),f=a[0],h._verifyRatio(b,f,e)?(b.push(f),h._squarifyCore(a.slice(1),b,c,d)):(g=c.remainingArea(h.sum(b)),d.push(c.getRowContainers(b)),h._squarifyCore(a,[],g,d)),d)},_getTreemap:function(a){var b,c,d=[];for(b=0;b<a.length;b++)for(c=0;c<a[b].length;c++)d.push(a[b][c]);return d},_verifyRatio:function(a,b,c){var d,e,f,g=this;return 0===a.length||(d=a.slice(),d.push(b),e=g._calculateRatio(a,c),f=g._calculateRatio(d,c),e>=f)},_calculateRatio:function(a,b){var c=this,d=c.min(a),e=c.max(a),f=c.sum(a);return p(q(b,2)*e/q(f,2),q(f,2)/(q(b,2)*d))},_normalize:function(a,b,c){var d,e=this,f=e.sum(a),g=b/f,h=[];for(d=0;d<a.length;d++)h[d]=a[d],h[d].targetValue=h[d].targetValue*g;return h}}),e={cls:d,enabled:!0,width:d,height:d,title:d,dataSource:d,readDataSource:!0,type:"squarified",valueTemplate:"{value}",textTemplate:"{title}",colorTemplate:"{color}",colors:["#1E98E4","#FFC500","#5CB85C","#FF2A00","#6D31FF","#00B2A1","#FF8000","#84B3DC"],tooltip:{enabled:!1,template:"{title}: {value}",filter:".sui-treemap-item",delay:80,position:"top"},events:{}},f=l.extend({init:function(){l.fn.init.apply(this,arguments);var b,d=this,e=a(d.element),f=d.options,g=f.cls,h=f.dataSource,i=f.dieOnError;return"div"!==e.prop("tagName").toLowerCase()?void u("shieldTreeMap: Underlying element is not DIV.",i):(e.addClass("sui-treemap "+(g?" "+g:"")),w(f.width)&&e.css("width",f.width),w(f.height)&&e.css("height",f.height),h?(d.dataSource=n.create(h),d._eventNS=b=".shieldTreeMap"+d.getInstanceId(),d.containers=[],d.colorIndex=0,a(c).on("resize"+b,r(d._onWinResize,d)),d.dataSource.on("change"+b,r(d._dsChange,d)),f.readDataSource&&d.dataSource.read(),void d.enabled(f.enabled)):(d.destroy(),void u("shieldTreemap: dataSource is not defined.",i)))},_dsChange:function(){var a=this,b=a.element;a._create(),a._createTooltip(),a._elWidth=b.width(),a._elHeight=b.height()},_onWinResize:function(a){var b=this;b._onWinResTimeout&&clearTimeout(b._onWinResTimeout),b._onWinResTimeout=setTimeout(r(b._winResized,b),100)},_winResized:function(){var a=this,b=a.element;a._elWidth===b.width()&&a._elHeight===b.height()||a.refresh()},_createTooltip:function(){var b=this,c=b.options.tooltip;c.enabled&&(b.tooltip?b.tooltip.refresh(c):b.tooltip=a(b.element).children(".sui-treemap-group").first().shieldTooltip(c).swidget())},_create:function(){var a,b=this,c=b.element,d=b.dataSource.data,e=b.options,f=h.create(e.type),i=new g(0,0,c.innerWidth(),c.innerHeight());c.empty(),b._prepareData(d),a=b.createGroup(c,i),i=b.createTitle(a,e.title),f.execute(d,i,a,b)},_prepareData:function(a){var b,c=this;for(b=0;b<a.length;b++)a[b].targetValue=c.getItemValue(a[b]),a[b].items&&c._prepareData(a[b].items)},createTitle:function(c,e){var f,h,i,j,k,l=this,m=l.options.type===y;return"undefined"===e||e===d?new g(c.position().left,c.position().top,c.innerWidth(),c.innerHeight()):(f=a('<div class="sui-treemap-title"></div>').appendTo(c),m&&f.innerHeight(c.outerHeight()),f.append('<div class="sui-treemap-title-inner">'+e.replace(/\s+/,"&nbsp;")+"</div>"),b.ui.Position.Set(f.find(".sui-treemap-title-inner"),f,{source:"center",target:"center"}),h=m?c.position().left+f.outerWidth():c.position().left,i=m?c.position().top:c.position().top+f.outerHeight(),j=m?c.innerWidth()-f.outerWidth():c.innerWidth(),k=m?c.innerHeight():c.innerHeight()-f.outerHeight(),new g(h,i,j,k))},createGroup:function(a,b){var c=this;return c._createContainer(a,b).addClass("sui-treemap-group sui-treemap-group-"+c.options.type)},createItem:function(a,b){var c,d=this,e=d.options,f=e.tooltip,g=(e.type===y,d.getItemText(b.dataItem));c=d._createContainer(a,b),c.addClass("sui-treemap-item").css("backgroundColor",d._getContentColor(b.dataItem)).on(A,r(d._contentClick,d,b.dataItem)),f.enabled&&c.attr("title",s(f.template,b.dataItem)),d.containers.push(c),c.html(g)},_contentClick:function(a){var b=this;b._enabled&&b.trigger(A,{title:b.getItemText(a),value:b.getItemValue(a),item:a})},_createContainer:function(b,c){return a("<div/>").appendTo(b).css({left:c.left,top:c.top,width:c.width,height:c.height})},_getContentColor:function(a){var b=this,c=b.options.colors;return b._getItemColor(a)||c[b.colorIndex++%c.length]},getItemValue:function(a){return t(s(this.options.valueTemplate,a))},getItemText:function(a){return s(this.options.textTemplate,a)},_getItemColor:function(a){var b=s(this.options.colorTemplate,a);return"undefined"!==b&&null!==b?b:d},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeAttr(B).removeClass("sui-treemap-disabled"):d.attr(B,B).addClass("sui-treemap-disabled"),c.tooltip&&c.tooltip.enabled(b),c._enabled=b,void 0):c._enabled},destroy:function(){var b,d=this,e=d._eventNS;for(a(c).off(e),clearTimeout(d._onWinResTimeout),d._onWinResTimeout=null,d.dataSource&&d.dataSource.off(e),d.tooltip&&(d.tooltip.destroy(),d.tooltip=null),b=0;b<d.containers.length;b++)d.containers[b].off(A);d.containers=null,a(d.element).empty(),l.fn.destroy.call(d)}}),f.defaults=e,b.ui.plugin("TreeMap",f)}(jQuery,shield,this);